manifest:
  version: "0.1.3"
  schema: https://a2as.org/cert/schema
  subject:
    name: cubestar1/triage-flow
    source: https://github.com/cubestar1/triage-flow
    branch: main
    commit: "5595d6e6"
    scope: [backend/version_3_multi_agent/agents/agent2/agent.py]
  issued:
    by: A2AS.org
    at: '2026-02-11T16:50:46Z'
    url: https://a2as.org/certified/agents/cubestar1/triage-flow
  signatures:
    digest: sha256:OWEsOM1MyWxok0hvAevQ7x6JGiN2tpKE-FhX-JP0foU
    key: ed25519:f7Ua_FtzvbUf4yk7JgLMnvVOTP72bcnfZ0Zgkt9t8E0
    sig: ed25519:3FPAet-nnXqeyFIFlhRE-gdeDWaCk0YPKgCzB1OvZY1FK535fwnSVyeLkpo9YOdSOESXd7q8FR1LsOcutMyjDA

agents:
  agent._build_agent:
    type: factory
    models: [gemini-1.5-flash-latest]
    params:
      name: medical_description_agent
      description: Provides medical condition descriptions and explanations
      instruction: ['You are a medical description assistant that provides clear, accurate, and patient-friendly explanations
          of medical conditions. Your responses should:', 1. Be accurate and based on medical knowledge, 2. Be easy to understand
          for non-medical professionals, 3. Include relevant symptoms and treatments, 4. Use simple language while maintaining
          medical accuracy]
      function: _build_agent

models:
  gemini-1.5-flash-latest:
    type: literal
    agents: [agent._build_agent]

imports:
  A2AServer: server.server.A2AServer
  AgentCapabilities: models.agent.AgentCapabilities
  AgentCard: models.agent.AgentCard
  AgentSkill: models.agent.AgentSkill
  Any: typing.Any
  asyncio: asyncio
  click: click
  configure: google.generativeai.client.configure
  datetime: datetime.datetime
  DescriptionFetcherTaskManager: agents.agent1.task_manager.DescriptionFetcherTaskManager
  DescriptorAgent: agents.agent1.agent.DescriptorAgent
  Dict: typing.Dict
  genai: google.generativeai
  GenerativeModel: google.generativeai.generative_models.GenerativeModel
  InMemoryArtifactService: google.adk.artifacts.InMemoryArtifactService
  InMemoryMemoryService: google.adk.memory.in_memory_memory_service.InMemoryMemoryService
  InMemorySessionService: google.adk.sessions.InMemorySessionService
  json: json
  List: typing.List
  LlmAgent: google.adk.agents.llm_agent.LlmAgent
  load_dotenv: dotenv.load_dotenv
  logging: logging
  np: numpy
  os: os
  requests: requests
  Runner: google.adk.runners.Runner
  SentenceTransformer: sentence_transformers.SentenceTransformer
  TriageAgent: agents.agent2.agent.TriageAgent
  TriageTaskManager: agents.agent2.task_manager.TriageTaskManager
  types: google.genai.types

functions:
  __init__:
    type: sync
    module: backend.version_3_multi_agent.agents.agent2.agent
    args: [self]
  _build_agent:
    type: sync
    module: backend.version_3_multi_agent.agents.agent2.agent
    args: [self]
    params:
      returns: LlmAgent
  _create_embeddings:
    type: sync
    module: backend.version_3_multi_agent.agents.agent2.agent
    args: [self]
  _find_relevant_conditions:
    type: sync
    module: backend.version_3_multi_agent.agents.agent2.agent
    args: [self, query, top_k]
    params:
      returns: List[tuple]
  _initialize_knowledge_base:
    type: sync
    module: backend.version_3_multi_agent.agents.agent2.agent
    args: [self]
    params:
      returns: Dict
  invoke:
    type: async
    module: backend.version_3_multi_agent.agents.agent2.agent
    args: [self, query, session_id]
    params:
      returns: str
  main:
    type: sync
    module: backend.version_3_multi_agent.agents.agent2._main_
    args: [host, port]
  process_triage:
    type: async
    module: backend.version_3_multi_agent.agents.agent2.agent_cmd
    args: [symptoms]
  stream:
    type: async
    module: backend.version_3_multi_agent.agents.agent2.agent
    args: [self, query, session_id]

variables:
  GOOGLE_API_KEY:
    type: env
    params:
      caller: [os.getenv, os.environ]
      path: [backend.version_3_multi_agent.agents.agent2.agent]
  KMP_DUPLICATE_LIB_OK:
    type: env
    params:
      caller: [os.environ]

networks:
  agent_card:
    type: api
    actions: [GET]
    protocols: [http]
    ports: ["80"]
    params:
      caller: [main]
      pattern: http://{host}:{port}/
